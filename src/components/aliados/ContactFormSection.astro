---
import { getEntry } from "astro:content";

const { heading, description, image, imageDark, imageAlt, submitText, submitColor, fields } = (await getEntry("aliadosForm", "form"))!.data;

const filledStyles = {
  primary: "bg-primary-600 hover:bg-primary-500 focus-visible:outline-primary-600 dark:bg-primary-500 dark:hover:bg-primary-400 dark:focus-visible:outline-primary-500",
  secondary: "bg-secondary-600 hover:bg-secondary-500 focus-visible:outline-secondary-600",
  neutral: "bg-neutral-800 hover:bg-neutral-700 focus-visible:outline-neutral-800 dark:bg-neutral-200 dark:hover:bg-neutral-300 dark:text-neutral-900",
} as const;
---

<div class="relative bg-white dark:bg-neutral-900">
  <div class="lg:absolute lg:inset-0 lg:left-1/2">
    <img src={image} alt={imageAlt} class:list={["h-64 w-full bg-neutral-50 object-cover sm:h-80 lg:absolute lg:h-full dark:bg-neutral-800", imageDark && "dark:hidden"]} />
    {imageDark && <img src={imageDark} alt={imageAlt} class="hidden h-64 w-full bg-neutral-800 object-cover sm:h-80 lg:absolute lg:h-full dark:block" />}
  </div>
  <div class="pt-16 pb-24 sm:pt-24 sm:pb-32 lg:mx-auto lg:grid lg:max-w-7xl lg:grid-cols-2 lg:pt-32">
    <div class="px-6 lg:px-8">
      <div class="mx-auto max-w-xl lg:mx-0 lg:max-w-lg">
        <h2 class="text-4xl font-semibold tracking-tight text-pretty text-neutral-900 sm:text-5xl dark:text-white">{heading}</h2>
        <p class="mt-2 text-lg/8 text-neutral-600 dark:text-neutral-400">{description}</p>
        <form action="#" method="POST" class="mt-16">
          <div class="grid grid-cols-1 gap-x-8 gap-y-6 sm:grid-cols-2">
            {fields.map((field) => (
              <div class:list={[field.colSpan === 2 && "sm:col-span-2"]}>
                {field.hint ? (
                  <div class="flex justify-between text-sm/6">
                    <label for={field.id} class="block font-semibold text-neutral-900 dark:text-white">{field.label}</label>
                    <p id={`${field.id}-description`} class="text-neutral-400 dark:text-neutral-500">{field.hint}</p>
                  </div>
                ) : (
                  <label for={field.id} class="block text-sm/6 font-semibold text-neutral-900 dark:text-white">{field.label}</label>
                )}
                <div class="mt-2.5">
                  {field.type === "textarea" ? (
                    <textarea
                      id={field.id}
                      name={field.name}
                      rows={4}
                      aria-describedby={field.hint ? `${field.id}-description` : undefined}
                      class="block w-full rounded-md bg-white px-3.5 py-2 text-base text-neutral-900 outline-1 -outline-offset-1 outline-neutral-300 placeholder:text-neutral-400 focus:outline-2 focus:-outline-offset-2 focus:outline-primary-600 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-neutral-500 dark:focus:outline-primary-500"
                    />
                  ) : (
                    <input
                      id={field.id}
                      type={field.type}
                      name={field.name}
                      autocomplete={field.autocomplete}
                      aria-describedby={field.hint ? `${field.id}-description` : undefined}
                      class="block w-full rounded-md bg-white px-3.5 py-2 text-base text-neutral-900 outline-1 -outline-offset-1 outline-neutral-300 placeholder:text-neutral-400 focus:outline-2 focus:-outline-offset-2 focus:outline-primary-600 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-neutral-500 dark:focus:outline-primary-500"
                    />
                  )}
                </div>
              </div>
            ))}
          </div>
          <div class="mt-10 flex justify-end border-t border-neutral-900/10 pt-8 dark:border-white/10">
            <button type="submit" class:list={["rounded-md px-3.5 py-2.5 text-center text-sm font-semibold text-white shadow-xs focus-visible:outline-2 focus-visible:outline-offset-2", filledStyles[submitColor]]}>{submitText}</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
