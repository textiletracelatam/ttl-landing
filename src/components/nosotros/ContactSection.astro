---
import { appConfig } from "../../config";
import { getCollection } from "astro:content";
import { readFileSync } from "node:fs";

const socialsEntries = await getCollection("socials");
const socials = socialsEntries
  .sort((a, b) => a.data.order - b.data.order)
  .map((s) => ({
    name: s.data.name,
    href: s.data.href,
    svg: readFileSync(`public${s.data.icon}`, "utf-8"),
  }));
---

<div class="bg-white dark:bg-neutral-900">
  <div class="mx-auto max-w-7xl px-6 py-12 sm:py-16 lg:px-8">
    <div class="mx-auto max-w-2xl text-center">
      <h2 class="text-4xl font-semibold tracking-tight text-pretty text-neutral-900 sm:text-5xl dark:text-white">Contáctanos</h2>
      <p class="mt-6 text-lg/8 text-neutral-600 dark:text-neutral-400">¿Tienes preguntas sobre trazabilidad textil? Estamos aquí para ayudarte.</p>
    </div>

    <div class="mx-auto mt-16 max-w-lg">
      <!-- Email -->
      <div class="flex flex-col items-center gap-4">
        <div class="flex size-12 items-center justify-center rounded-full bg-primary-50 dark:bg-primary-500/10">
          <svg class="size-6 text-primary-600 dark:text-primary-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75" />
          </svg>
        </div>
        <a href={`mailto:${appConfig.email}`} class="text-lg font-semibold text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300">
          {appConfig.email}
        </a>
      </div>

      <!-- Divider -->
      <div class="mt-10 flex items-center gap-4">
        <div class="h-px flex-1 bg-neutral-200 dark:bg-neutral-700"></div>
        <span class="text-sm text-neutral-500 dark:text-neutral-400">o encuéntranos en</span>
        <div class="h-px flex-1 bg-neutral-200 dark:bg-neutral-700"></div>
      </div>

      <!-- Socials -->
      <div class="mt-10 flex justify-center gap-6">
        {socials.map((item) => (
          <a
            href={item.href}
            target="_blank"
            rel="noopener noreferrer"
            class="group flex size-12 items-center justify-center rounded-full bg-neutral-100 transition-colors hover:bg-primary-50 dark:bg-neutral-800 dark:hover:bg-primary-500/10 [&>svg]:size-5 [&>svg]:text-neutral-600 [&>svg]:transition-colors [&>svg]:group-hover:text-primary-600 dark:[&>svg]:text-neutral-400 dark:[&>svg]:group-hover:text-primary-400"
          >
            <span class="sr-only">{item.name}</span>
            <Fragment set:html={item.svg} />
          </a>
        ))}
      </div>

      <!-- CTA -->
      <div class="mt-12 text-center">
        <a
          href="/contactanos"
          class="rounded-md bg-primary-600 px-5 py-3 text-sm font-semibold text-white shadow-xs hover:bg-primary-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-600 dark:bg-primary-500 dark:hover:bg-primary-400"
        >
          Ir a la página de contacto
        </a>
      </div>
    </div>
  </div>
</div>
