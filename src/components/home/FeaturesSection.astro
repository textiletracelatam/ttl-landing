---
import { getEntry } from "astro:content";

interface Props {}

const { tagline, heading, features } = (await getEntry("homeFeatures", "features"))!.data;
---

<div class="bg-neutral-50 py-16 sm:py-20 dark:bg-neutral-900">
  <div class="mx-auto max-w-2xl px-6 lg:max-w-7xl lg:px-8">
    <h2 class="text-center text-base/7 font-semibold text-primary-600 dark:text-primary-400">{tagline}</h2>
    <p class="mx-auto mt-2 max-w-lg text-center text-4xl font-semibold tracking-tight text-balance text-neutral-900 sm:text-5xl dark:text-white">{heading}</p>
    <div class="mt-10 grid gap-4 sm:mt-16 lg:grid-cols-3 lg:grid-rows-2">
      {/* Left: Phone mockup (row-span-2) */}
      <div class="relative lg:row-span-2">
        <div class="absolute inset-px rounded-lg bg-white lg:rounded-l-4xl dark:bg-neutral-800"></div>
        <div class="relative flex h-full flex-col overflow-hidden rounded-[calc(var(--radius-lg)+1px)] lg:rounded-l-[calc(2rem+1px)]">
          <div class="px-8 pt-8 pb-3 sm:px-10 sm:pt-10 sm:pb-0">
            <p class="mt-2 text-lg font-medium tracking-tight text-neutral-900 max-lg:text-center dark:text-white">{features[0].title}</p>
            <p class="mt-2 max-w-lg text-sm/6 text-neutral-600 max-lg:text-center dark:text-neutral-400">{features[0].description}</p>
          </div>
          <div class="@container relative min-h-120 w-full grow max-lg:mx-auto max-lg:max-w-sm">
            <div class="absolute inset-x-10 top-10 bottom-0 overflow-hidden rounded-t-[12cqw] border-x-[3cqw] border-t-[3cqw] border-neutral-700 bg-neutral-900 shadow-2xl dark:shadow-none dark:outline dark:outline-white/20">
              <img src={features[0].phoneMockupLight} alt={features[0].phoneMockupAlt} class="size-full object-cover object-top dark:hidden" />
              <img src={features[0].phoneMockupDark} alt={features[0].phoneMockupAlt} class="size-full object-cover object-top hidden dark:block" />
            </div>
          </div>
        </div>
        <div class="pointer-events-none absolute inset-px rounded-lg shadow-sm outline outline-black/5 lg:rounded-l-4xl dark:outline-white/15"></div>
      </div>

      {/* Top middle: Image card */}
      <div class="relative max-lg:row-start-1">
        <div class="absolute inset-px rounded-lg bg-white max-lg:rounded-t-4xl dark:bg-neutral-800"></div>
        <div class="relative flex h-full flex-col overflow-hidden rounded-[calc(var(--radius-lg)+1px)] max-lg:rounded-t-[calc(2rem+1px)]">
          <div class="px-8 pt-8 sm:px-10 sm:pt-10">
            <p class="mt-2 text-lg font-medium tracking-tight text-neutral-900 max-lg:text-center dark:text-white">{features[1].title}</p>
            <p class="mt-2 max-w-lg text-sm/6 text-neutral-600 max-lg:text-center dark:text-neutral-400">{features[1].description}</p>
          </div>
          <div class="flex flex-1 items-center justify-center px-8 max-lg:pt-10 max-lg:pb-12 sm:px-10 lg:pb-2">
            <img src={features[1].image} alt={features[1].imageAlt} class:list={["w-full max-lg:max-w-xs rounded-lg object-cover", features[1].imageDark && "dark:hidden"]} />
            {features[1].imageDark && <img src={features[1].imageDark} alt={features[1].imageAlt} class="hidden dark:block w-full max-lg:max-w-xs rounded-lg object-cover" />}
          </div>
        </div>
        <div class="pointer-events-none absolute inset-px rounded-lg shadow-sm outline outline-black/5 max-lg:rounded-t-4xl dark:outline-white/15"></div>
      </div>

      {/* Bottom middle: Image card */}
      <div class="relative max-lg:row-start-3 lg:col-start-2 lg:row-start-2">
        <div class="absolute inset-px rounded-lg bg-white dark:bg-neutral-800"></div>
        <div class="relative flex h-full flex-col overflow-hidden rounded-[calc(var(--radius-lg)+1px)]">
          <div class="px-8 pt-8 sm:px-10 sm:pt-10">
            <p class="mt-2 text-lg font-medium tracking-tight text-neutral-900 max-lg:text-center dark:text-white">{features[2].title}</p>
            <p class="mt-2 max-w-lg text-sm/6 text-neutral-600 max-lg:text-center dark:text-neutral-400">{features[2].description}</p>
          </div>
          <div class="flex flex-1 items-center justify-center px-8 max-lg:py-6 sm:px-10 lg:pb-2">
            <img src={features[2].image} alt={features[2].imageAlt} class:list={["w-full max-lg:max-w-xs rounded-lg object-cover", features[2].imageDark && "dark:hidden"]} />
            {features[2].imageDark && <img src={features[2].imageDark} alt={features[2].imageAlt} class="hidden dark:block w-full max-lg:max-w-xs rounded-lg object-cover" />}
          </div>
        </div>
        <div class="pointer-events-none absolute inset-px rounded-lg shadow-sm outline outline-black/5 dark:outline-white/15"></div>
      </div>

      {/* Right: Code snippet (row-span-2) */}
      <div class="relative lg:row-span-2">
        <div class="absolute inset-px rounded-lg bg-white max-lg:rounded-b-4xl lg:rounded-r-4xl dark:bg-neutral-800"></div>
        <div class="relative flex h-full flex-col overflow-hidden rounded-[calc(var(--radius-lg)+1px)] max-lg:rounded-b-[calc(2rem+1px)] lg:rounded-r-[calc(2rem+1px)]">
          <div class="px-8 pt-8 pb-3 sm:px-10 sm:pt-10 sm:pb-0">
            <p class="mt-2 text-lg font-medium tracking-tight text-neutral-900 max-lg:text-center dark:text-white">{features[3].title}</p>
            <p class="mt-2 max-w-lg text-sm/6 text-neutral-600 max-lg:text-center dark:text-neutral-400">{features[3].description}</p>
          </div>
          <div class="relative min-h-120 w-full grow">
            <div class="absolute top-10 right-0 bottom-0 left-10 overflow-hidden rounded-tl-xl bg-neutral-900 shadow-2xl outline outline-white/10 dark:bg-neutral-900/60 dark:shadow-none">
              <div class="flex bg-neutral-900 outline outline-white/5">
                <div class="-mb-px flex text-sm/6 font-medium text-neutral-400">
                  {features[3].codeSnippet?.tabs.map((tab, i) => (
                    <div class={i === features[3].codeSnippet?.activeTab ? "border-r border-b border-r-white/10 border-b-white/20 bg-white/5 px-4 py-2 text-white" : "border-r border-neutral-600/10 px-4 py-2"}>{tab}</div>
                  ))}
                </div>
              </div>
              <div class="px-6 pt-6 pb-14 text-sm/6 text-neutral-300 font-mono" set:html={features[3].codeSnippet?.code} />
            </div>
          </div>
        </div>
        <div class="pointer-events-none absolute inset-px rounded-lg shadow-sm outline outline-black/5 max-lg:rounded-b-4xl lg:rounded-r-4xl dark:outline-white/15"></div>
      </div>
    </div>
  </div>
</div>
