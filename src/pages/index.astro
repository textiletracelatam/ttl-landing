---
import Layout from "../layouts/Layout.astro";
import { getEntry, getCollection } from "astro:content";

const home = await getEntry("home", "home");
const { data } = home;

const posts = (await getCollection("blog"))
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 5);
---

<Layout title="Home">
  <div class="isolate">
    <!-- Hero section -->
    <div class="relative isolate overflow-hidden bg-background">
      <svg aria-hidden="true" class="absolute inset-0 -z-10 size-full mask-[radial-gradient(100%_100%_at_top_right,white,transparent)] stroke-neutral-200 dark:stroke-white/10">
        <defs>
          <pattern id="hero-pattern" width="200" height="200" x="50%" y="-1" patternUnits="userSpaceOnUse">
            <path d="M.5 200V.5H200" fill="none" />
          </pattern>
        </defs>
        <svg x="50%" y="-1" class="overflow-visible fill-neutral-50 dark:fill-neutral-800/20">
          <path d="M-200 0h201v201h-201Z M600 0h201v201h-201Z M-400 600h201v201h-201Z M200 800h201v201h-201Z" stroke-width="0" />
        </svg>
        <rect width="100%" height="100%" fill="url(#hero-pattern)" stroke-width="0" />
      </svg>
      <div aria-hidden="true" class="absolute top-10 left-[calc(50%-4rem)] -z-10 transform-gpu blur-3xl sm:left-[calc(50%-18rem)] lg:top-[calc(50%-30rem)] lg:left-48 xl:left-[calc(50%-24rem)]">
        <div style="clip-path: polygon(73.6% 51.7%, 91.7% 11.8%, 100% 46.4%, 97.4% 82.2%, 92.5% 84.9%, 75.7% 64%, 55.3% 47.5%, 46.5% 49.4%, 45% 62.9%, 50.3% 87.2%, 21.3% 64.1%, 0.1% 100%, 5.4% 51.1%, 21.4% 63.9%, 58.9% 0.2%, 73.6% 51.7%)" class="aspect-1108/632 w-277 bg-linear-to-r from-primary-300 to-secondary-300 opacity-20"></div>
      </div>
      <div class="mx-auto max-w-7xl px-6 py-12 sm:py-16 lg:flex lg:items-center lg:gap-x-10 lg:px-8 lg:py-20">
        <div class="mx-auto max-w-2xl lg:mx-0 lg:flex-auto">
          <img src="https://d1yei2z3i6k35z.cloudfront.net/15861133/69715e5480fa7_logonegrosinfondo.png" alt="Textile Trace Latam" class="h-30 w-auto object-contain" />
          <h1 class="mt-10 text-5xl font-semibold tracking-tight text-pretty text-neutral-900 sm:text-7xl dark:text-white">{data.heroHeadline}</h1>
          <p class="mt-4 text-lg font-semibold text-neutral-800 dark:text-neutral-200">{data.heroTagline}</p>
          <p class="mt-8 text-lg font-medium text-pretty text-neutral-500 sm:text-xl/8 dark:text-neutral-400">{data.heroDescription}</p>
          <div class="mt-10 flex items-center gap-x-6">
            <a href="#" class="rounded-md bg-primary-500 px-3.5 py-2.5 text-sm font-semibold text-white shadow-xs hover:bg-primary-400 transition-colors">{data.ctaPrimary}</a>
            <a href="#" class="text-sm/6 font-semibold text-neutral-900 dark:text-white">{data.ctaGhost} <span aria-hidden="true">&rarr;</span></a>
          </div>
        </div>
        <div class="mt-16 sm:mt-24 lg:mt-0 lg:shrink-0 lg:grow">
          <svg role="img" viewBox="0 0 366 729" class="mx-auto w-91.5 max-w-full drop-shadow-xl">
            <title>App screenshot</title>
            <defs>
              <clipPath id="phone-clip">
                <rect width="316" height="684" rx="36" />
              </clipPath>
            </defs>
            <path d="M363.315 64.213C363.315 22.99 341.312 1 300.092 1H66.751C25.53 1 3.528 22.99 3.528 64.213v44.68l-.857.143A2 2 0 0 0 1 111.009v24.611a2 2 0 0 0 1.671 1.973l.95.158a2.26 2.26 0 0 1-.093.236v26.173c.212.1.398.296.541.643l-1.398.233A2 2 0 0 0 1 167.009v47.611a2 2 0 0 0 1.671 1.973l1.368.228c-.139.319-.314.533-.511.653v16.637c.221.104.414.313.56.689l-1.417.236A2 2 0 0 0 1 237.009v47.611a2 2 0 0 0 1.671 1.973l1.347.225c-.135.294-.302.493-.49.607v377.681c0 41.213 22 63.208 63.223 63.208h95.074c.947-.504 2.717-.843 4.745-.843l.141.001h.194l.086-.001 33.704.005c1.849.043 3.442.37 4.323.838h95.074c41.222 0 63.223-21.999 63.223-63.212v-394.63c-.259-.275-.48-.796-.63-1.47l-.011-.133 1.655-.276A2 2 0 0 0 366 266.62v-77.611a2 2 0 0 0-1.671-1.973l-1.712-.285c.148-.839.396-1.491.698-1.811V64.213Z" fill="#4B5563" />
            <path d="M16 59c0-23.748 19.252-43 43-43h246c23.748 0 43 19.252 43 43v615c0 23.196-18.804 42-42 42H58c-23.196 0-42-18.804-42-42V59Z" fill="#343E4E" />
            <foreignObject width="316" height="684" clip-path="url(#phone-clip)" transform="translate(24 24)">
              <img src="https://xhfttqvimvxbjvjpxvjb.supabase.co/storage/v1/object/public/temp_ttl/Create%20Next%20App.png" alt="App screenshot" class="dark:hidden" />
              <img src="https://xhfttqvimvxbjvjpxvjb.supabase.co/storage/v1/object/public/temp_ttl/Create%20Next%20App%202.png" alt="App screenshot" class="hidden dark:block" />
            </foreignObject>
          </svg>
        </div>
      </div>
    </div>

    <!-- Trust bar -->
    <div class="bg-white py-16 sm:py-20 dark:bg-neutral-900">
      <div class="mx-auto max-w-7xl px-6 lg:px-8">
        <div class="mx-auto max-w-2xl lg:max-w-none">
          <div class="text-center">
            <p class="text-base/7 font-semibold text-primary-600 dark:text-primary-400">{data.trustTagline}</p>
            <h2 class="mt-2 text-4xl font-semibold tracking-tight text-balance text-neutral-900 sm:text-5xl dark:text-white">{data.trustHeading}</h2>
          </div>
          <dl class="mt-16 grid grid-cols-1 gap-0.5 overflow-hidden rounded-2xl text-center sm:grid-cols-2 lg:grid-cols-4">
            {data.trustLogos.map((logo) => (
              <div class="flex flex-col bg-neutral-400/5 p-8 dark:bg-white/5">
                <dd class="text-3xl font-semibold tracking-tight text-neutral-900 dark:text-white">{logo.name}</dd>
              </div>
            ))}
          </dl>
        </div>
      </div>
    </div>

    <!-- Features bento grid -->
    <div class="bg-neutral-50 py-16 sm:py-20 dark:bg-neutral-900">
      <div class="mx-auto max-w-2xl px-6 lg:max-w-7xl lg:px-8">
        <h2 class="text-center text-base/7 font-semibold text-primary-600 dark:text-primary-400">{data.featuresTagline}</h2>
        <p class="mx-auto mt-2 max-w-lg text-center text-4xl font-semibold tracking-tight text-balance text-neutral-900 sm:text-5xl dark:text-white">{data.featuresHeading}</p>
        <div class="mt-10 grid gap-4 sm:mt-16 lg:grid-cols-3 lg:grid-rows-2">
          <!-- Left: Phone mockup (row-span-2) -->
          <div class="relative lg:row-span-2">
            <div class="absolute inset-px rounded-lg bg-white lg:rounded-l-4xl dark:bg-neutral-800"></div>
            <div class="relative flex h-full flex-col overflow-hidden rounded-[calc(var(--radius-lg)+1px)] lg:rounded-l-[calc(2rem+1px)]">
              <div class="px-8 pt-8 pb-3 sm:px-10 sm:pt-10 sm:pb-0">
                <p class="mt-2 text-lg font-medium tracking-tight text-neutral-900 max-lg:text-center dark:text-white">{data.features[0].title}</p>
                <p class="mt-2 max-w-lg text-sm/6 text-neutral-600 max-lg:text-center dark:text-neutral-400">{data.features[0].description}</p>
              </div>
              <div class="@container relative min-h-120 w-full grow max-lg:mx-auto max-lg:max-w-sm">
                <div class="absolute inset-x-10 top-10 bottom-0 overflow-hidden rounded-t-[12cqw] border-x-[3cqw] border-t-[3cqw] border-neutral-700 bg-neutral-900 shadow-2xl dark:shadow-none dark:outline dark:outline-white/20">
                  <img src="https://xhfttqvimvxbjvjpxvjb.supabase.co/storage/v1/object/public/temp_ttl/Create%20Next%20App.png" alt="App screenshot" class="size-full object-cover object-top dark:hidden" />
                  <img src="https://xhfttqvimvxbjvjpxvjb.supabase.co/storage/v1/object/public/temp_ttl/Create%20Next%20App%202.png" alt="App screenshot" class="size-full object-cover object-top hidden dark:block" />
                </div>
              </div>
            </div>
            <div class="pointer-events-none absolute inset-px rounded-lg shadow-sm outline outline-black/5 lg:rounded-l-4xl dark:outline-white/15"></div>
          </div>

          <!-- Top middle: Identificación -->
          <div class="relative max-lg:row-start-1">
            <div class="absolute inset-px rounded-lg bg-white max-lg:rounded-t-4xl dark:bg-neutral-800"></div>
            <div class="relative flex h-full flex-col overflow-hidden rounded-[calc(var(--radius-lg)+1px)] max-lg:rounded-t-[calc(2rem+1px)]">
              <div class="px-8 pt-8 sm:px-10 sm:pt-10">
                <p class="mt-2 text-lg font-medium tracking-tight text-neutral-900 max-lg:text-center dark:text-white">{data.features[1].title}</p>
                <p class="mt-2 max-w-lg text-sm/6 text-neutral-600 max-lg:text-center dark:text-neutral-400">{data.features[1].description}</p>
              </div>
              <div class="flex flex-1 items-center justify-center px-8 max-lg:pt-10 max-lg:pb-12 sm:px-10 lg:pb-2">
                <img src={data.heroImage} alt="Equipo de trabajo" class="w-full max-lg:max-w-xs rounded-lg object-cover" />
              </div>
            </div>
            <div class="pointer-events-none absolute inset-px rounded-lg shadow-sm outline outline-black/5 max-lg:rounded-t-4xl dark:outline-white/15"></div>
          </div>

          <!-- Bottom middle: Acompañamiento -->
          <div class="relative max-lg:row-start-3 lg:col-start-2 lg:row-start-2">
            <div class="absolute inset-px rounded-lg bg-white dark:bg-neutral-800"></div>
            <div class="relative flex h-full flex-col overflow-hidden rounded-[calc(var(--radius-lg)+1px)]">
              <div class="px-8 pt-8 sm:px-10 sm:pt-10">
                <p class="mt-2 text-lg font-medium tracking-tight text-neutral-900 max-lg:text-center dark:text-white">{data.features[2].title}</p>
                <p class="mt-2 max-w-lg text-sm/6 text-neutral-600 max-lg:text-center dark:text-neutral-400">{data.features[2].description}</p>
              </div>
              <div class="flex flex-1 items-center justify-center px-8 max-lg:py-6 sm:px-10 lg:pb-2">
                <svg class="size-24 text-primary-500 opacity-20" fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z" />
                </svg>
              </div>
            </div>
            <div class="pointer-events-none absolute inset-px rounded-lg shadow-sm outline outline-black/5 dark:outline-white/15"></div>
          </div>

          <!-- Right: Integración tecnológica (row-span-2) -->
          <div class="relative lg:row-span-2">
            <div class="absolute inset-px rounded-lg bg-white max-lg:rounded-b-4xl lg:rounded-r-4xl dark:bg-neutral-800"></div>
            <div class="relative flex h-full flex-col overflow-hidden rounded-[calc(var(--radius-lg)+1px)] max-lg:rounded-b-[calc(2rem+1px)] lg:rounded-r-[calc(2rem+1px)]">
              <div class="px-8 pt-8 pb-3 sm:px-10 sm:pt-10 sm:pb-0">
                <p class="mt-2 text-lg font-medium tracking-tight text-neutral-900 max-lg:text-center dark:text-white">{data.features[3].title}</p>
                <p class="mt-2 max-w-lg text-sm/6 text-neutral-600 max-lg:text-center dark:text-neutral-400">{data.features[3].description}</p>
              </div>
              <div class="relative min-h-120 w-full grow">
                <div class="absolute top-10 right-0 bottom-0 left-10 overflow-hidden rounded-tl-xl bg-neutral-900 shadow-2xl outline outline-white/10 dark:bg-neutral-900/60 dark:shadow-none">
                  <div class="flex bg-neutral-900 outline outline-white/5">
                    <div class="-mb-px flex text-sm/6 font-medium text-neutral-400">
                      <div class="border-r border-b border-r-white/10 border-b-white/20 bg-white/5 px-4 py-2 text-white">ProductPassport.tsx</div>
                      <div class="border-r border-neutral-600/10 px-4 py-2">Dashboard.tsx</div>
                    </div>
                  </div>
                  <div class="px-6 pt-6 pb-14 text-sm/6 text-neutral-300 font-mono">
                    <p><span class="text-secondary-300">export</span> <span class="text-primary-300">function</span> <span class="text-white">getPassport</span>(id) &#123;</p>
                    <p class="pl-4"><span class="text-secondary-300">const</span> data = <span class="text-primary-300">await</span> fetch(</p>
                    <p class="pl-8"><span class="text-yellow-300">`/api/dpp/$&#123;id&#125;`</span></p>
                    <p class="pl-4">);</p>
                    <p class="pl-4"><span class="text-secondary-300">return</span> &#123;</p>
                    <p class="pl-8">origin, materials,</p>
                    <p class="pl-8">certifications,</p>
                    <p class="pl-8">sustainability,</p>
                    <p class="pl-8">traceability</p>
                    <p class="pl-4">&#125;;</p>
                    <p>&#125;</p>
                  </div>
                </div>
              </div>
            </div>
            <div class="pointer-events-none absolute inset-px rounded-lg shadow-sm outline outline-black/5 max-lg:rounded-b-4xl lg:rounded-r-4xl dark:outline-white/15"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- How it works section -->
    <div class="bg-primary-50 py-16 sm:py-20 dark:bg-neutral-900" id="how-it-works">
      <div class="mx-auto max-w-7xl px-6 lg:px-8">
        <div class="mx-auto max-w-2xl lg:text-center">
          <p class="text-base/7 font-semibold text-primary-600 dark:text-primary-400">Simple y efectivo</p>
          <h2 class="mt-2 text-4xl font-semibold tracking-tight text-pretty text-neutral-900 sm:text-5xl dark:text-white">{data.howItWorksHeading}</h2>
        </div>
        <div class="mx-auto mt-16 max-w-2xl sm:mt-20 lg:mt-24 lg:max-w-none">
          <dl class="grid max-w-xl grid-cols-1 gap-8 lg:max-w-none lg:grid-cols-3">
            {data.howItWorksSteps.map((step) => (
              <div class="flex flex-col rounded-2xl border border-primary-100 bg-white p-8 dark:border-neutral-700 dark:bg-neutral-800">
                <dt class="flex items-center gap-x-3 text-base/7 font-semibold text-neutral-900 dark:text-white">
                  <div class="flex size-10 items-center justify-center rounded-full bg-primary-500 text-sm font-bold text-white">
                    {step.step}
                  </div>
                  {step.title}
                </dt>
                <dd class="mt-4 flex flex-auto flex-col text-base/7 text-neutral-600 dark:text-neutral-400">
                  <p class="flex-auto">{step.description}</p>
                </dd>
              </div>
            ))}
          </dl>
        </div>
      </div>
    </div>

    <!-- About + Stats section -->
    <div class="relative bg-white dark:bg-neutral-900">
      <img src={data.aboutImage} alt="" class="h-56 w-full bg-neutral-50 object-cover lg:absolute lg:inset-y-0 lg:left-0 lg:h-full lg:w-1/2 dark:bg-neutral-800" />
      <div class="mx-auto grid max-w-7xl lg:grid-cols-2">
        <div class="px-6 pt-16 pb-24 sm:pt-20 sm:pb-32 lg:col-start-2 lg:px-8 lg:pt-32">
          <div class="mx-auto max-w-2xl lg:mr-0 lg:max-w-lg">
            <h2 class="text-base/8 font-semibold text-primary-600 dark:text-primary-400">{data.aboutTagline}</h2>
            <p class="mt-2 text-4xl font-semibold tracking-tight text-pretty text-neutral-900 sm:text-5xl dark:text-white">{data.aboutHeading}</p>
            <p class="mt-6 text-lg/8 text-neutral-600 dark:text-neutral-300">{data.aboutDescription}</p>
            <dl class="mt-16 grid max-w-xl grid-cols-1 gap-8 sm:mt-20 sm:grid-cols-2 xl:mt-16">
              {data.stats.map((stat) => (
                <div class="flex flex-col gap-y-3 border-l border-neutral-900/10 pl-6 dark:border-white/10">
                  <dt class="text-sm/6 text-neutral-600 dark:text-neutral-400">{stat.label}</dt>
                  <dd class="order-first text-3xl font-semibold tracking-tight text-neutral-900 dark:text-white">{stat.value}</dd>
                </div>
              ))}
            </dl>
          </div>
        </div>
      </div>
    </div>

    <!-- Blog section -->
    <div class="bg-background py-16 sm:py-20">
      <div class="mx-auto max-w-7xl px-6 lg:px-8">
        <div class="mx-auto max-w-2xl text-center">
          <p class="text-base/7 font-semibold text-primary-600 dark:text-primary-400">Nuestro blog</p>
          <h2 class="mt-2 text-4xl font-semibold tracking-tight text-balance text-neutral-900 sm:text-5xl dark:text-white">Artículos y novedades</h2>
          <p class="mt-2 text-lg/8 text-neutral-600 dark:text-neutral-300">Explora las últimas tendencias en trazabilidad, sostenibilidad y pasaportes digitales.</p>
        </div>
        <div class="mt-16 -mx-6 px-6 lg:-mx-8 lg:px-8 overflow-x-auto">
          <div class="flex gap-x-8" style="min-width: max-content;">
            {posts.map((post) => (
              <article class="flex w-80 shrink-0 flex-col items-start justify-between">
                <div class="relative w-full">
                  <img src={post.data.image} alt={post.data.title} class="aspect-video w-full rounded-2xl bg-neutral-100 object-cover dark:bg-neutral-800" />
                  <div class="absolute inset-0 rounded-2xl inset-ring inset-ring-neutral-900/10 dark:inset-ring-white/10"></div>
                </div>
                <div class="flex w-full grow flex-col justify-between">
                  <div class="mt-8 flex items-center gap-x-4 text-xs">
                    <time datetime={post.data.date.toISOString()} class="text-neutral-500 dark:text-neutral-400">
                      {post.data.date.toLocaleDateString("es-ES", { year: "numeric", month: "long", day: "numeric" })}
                    </time>
                    <span class="relative z-10 rounded-full bg-primary-50 px-3 py-1.5 font-medium text-primary-700 dark:bg-primary-500/10 dark:text-primary-400">{post.data.category}</span>
                  </div>
                  <div class="group relative grow">
                    <h3 class="mt-3 text-lg/6 font-semibold text-neutral-900 group-hover:text-neutral-600 dark:text-white dark:group-hover:text-neutral-300">
                      <a href={`/blog/${post.id}`}>
                        <span class="absolute inset-0"></span>
                        {post.data.title}
                      </a>
                    </h3>
                    <p class="mt-5 line-clamp-3 text-sm/6 text-neutral-600 dark:text-neutral-400">{post.data.description}</p>
                  </div>
                  <div class="relative mt-8 flex items-center gap-x-4 justify-self-end">
                    <p class="text-sm font-semibold text-neutral-900 dark:text-white">{post.data.author}</p>
                  </div>
                </div>
              </article>
            ))}
          </div>
        </div>
        <div class="mt-16 text-center">
          <a href="/blog" class="text-sm/6 font-semibold text-primary-600 dark:text-primary-400">Ver todos los artículos <span aria-hidden="true">&rarr;</span></a>
        </div>
      </div>
    </div>

    <!-- CTA section -->
    <div class="bg-white py-16 sm:py-20 dark:bg-neutral-900">
      <div class="mx-auto max-w-7xl px-6 lg:px-8">
        <div class="mx-auto max-w-2xl text-center">
          <h2 class="text-4xl font-semibold tracking-tight text-pretty text-neutral-900 sm:text-5xl dark:text-white">{data.ctaHeading}</h2>
          <p class="mx-auto mt-6 max-w-xl text-lg/8 text-neutral-600 dark:text-neutral-400">{data.ctaDescription}</p>
          <div class="mt-10 flex items-center justify-center gap-x-6">
            <a href="#" class="rounded-md bg-primary-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-primary-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-600">{data.ctaPrimaryText}</a>
            <a href="#" class="text-sm/6 font-semibold text-neutral-900 dark:text-white">{data.ctaGhostText} <span aria-hidden="true">&rarr;</span></a>
          </div>
        </div>
      </div>
    </div>
  </div>
</Layout>
